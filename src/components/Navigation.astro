---
import { getRelativeLocaleUrl } from 'astro:i18n';

const currentPath = Astro.url.pathname;
const base = import.meta.env.BASE_URL;
// Remove base path and ensure consistent trailing slash handling
const normalizedCurrentPath = currentPath.replace(base, '').replace(/\/$/, '') || '/';

// Debug logging
console.log('Current Path:', currentPath);
console.log('Base URL:', base);
console.log('Normalized Path:', normalizedCurrentPath);
---

<nav>
    <div class="space-x-6">
        <a href={`${base}/`} class:list={[
            "relative text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-all pb-1 leading-relaxed",
            "after:absolute after:bottom-0 after:left-0 after:h-[2px] after:transition-[width] after:duration-300",
            "after:bg-gray-900 dark:after:bg-white",
            normalizedCurrentPath === '/' ? "text-gray-900 dark:text-white after:w-full" : "after:w-0 hover:after:w-full"
        ]}>Home</a>
        <a href={`${base}/blog`} class:list={[
            "relative text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-all pb-1 leading-relaxed",
            "after:absolute after:bottom-0 after:left-0 after:h-[2px] after:transition-[width] after:duration-300",
            "after:bg-gray-900 dark:after:bg-white",
            normalizedCurrentPath.startsWith('/blog') ? "text-gray-900 dark:text-white after:w-full" : "after:w-0 hover:after:w-full"
        ]}>Blog</a>
        <a href={`${base}/contact`} class:list={[
            "relative text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-all pb-1 leading-relaxed",
            "after:absolute after:bottom-0 after:left-0 after:h-[2px] after:transition-[width] after:duration-300",
            "after:bg-gray-900 dark:after:bg-white",
            normalizedCurrentPath === '/contact' ? "text-gray-900 dark:text-white after:w-full" : "after:w-0 hover:after:w-full"
        ]}>Contact</a>
    </div>
</nav> 